{% extends 'ewaste_management/layout.html' %}
{% load static %}

{% block title %}EcoBin - Edit Publication Details{% endblock %}

{% block content %}
<header class="bg-primary text-white p-4 text-center">
        <h1 class="text-2xl font-bold">Edit Publication</h1>
        <p class="mt-1">Update your research and findings</p>
    </header>
  
    <div class="max-w-3xl mx-auto p-4">
        <div id="message-box" class="hidden py-2 px-4 mb-4 text-white rounded"></div>
        
        <div class="bg-white rounded-lg shadow p-6">
            <form method="post" action="{% url 'ewaste_management:edit_publication' publication.id %}" class="space-y-4">
                {% csrf_token %}
                
                <div>
                    <label for="title" class="block font-semibold mb-1">Publication Title:</label>
                    <input type="text" id="title" name="title" value="{{ publication.title }}" class="w-full border rounded p-2" required>
                </div>
                
                <div>
                    <label for="publication_date" class="block font-semibold mb-1">Event Start Date:</label>
                    <input type="date" id="publication_date" name="event_start_date" value="{{ publication.event_start_date|date:'Y-m-d' }}" class="w-full border rounded p-2" required>
                </div>

                <div>
                    <label for="publication_date" class="block font-semibold mb-1">Event End Date:</label>
                    <input type="date" id="publication_date" name="event_end_date" value="{{ publication.event_end_date|date:'Y-m-d' }}" class="w-full border rounded p-2" required>
                </div>
                
                <div>
                    <label for="publication_location" class="block font-semibold mb-1">Location:</label>
                    <input type="text" id="publication_location" name="publication_location" value="{{ publication.publication_location }}" class="w-full border rounded p-2" required>
                </div>
                
                <div>
                    <label for="publication_detail" class="block font-semibold mb-1">Publication Details:</label>
                    <textarea id="publication_detail" name="publication_detail" class="w-full border rounded p-2 min-h-[200px]" required>{{ publication.publication_detail }}</textarea>
                </div>
                
                <!-- Hidden field for user ID, will be filled by backend -->
                <input type="hidden" name="user" value="{{ publication.user.id }}">
                
                <div class="flex justify-between mt-6">
                    <a href="{% url 'ewaste_management:uemip' %}" class="bg-gray-300 text-gray-700 py-2 px-4 rounded font-semibold hover:bg-gray-400 transition-colors">Cancel</a>
                    <div class="flex space-x-2">
                        <button type="submit" class="bg-secondary text-white py-2 px-4 rounded font-semibold hover:bg-dark transition-colors">Update Publication</button>
                    </div>
                </div>
            </form>
            
        </div>
    </div>

{% endblock %}
